!function(e, t, i) {
    function n(i, n) {
        var o = t.createElement("div");
        return i && (o.id = q + i),
        o.style.cssText = n || !1,
        e(o)
    }
    function o(i, n) {
        var o = t.createElement("a");
        return i && (o.id = q + i),
        o.href = "javascript:void(0);",
        o.style.cssText = n || !1,
        e(o)
    }
    function h(e, t) {
        return t = "x" === t ? x.width() : x.height(),
        "string" == typeof e ? Math.round(/%/.test(e) ? t / 100 * parseInt(e, 10) : parseInt(e, 10)) : e
    }
    function s(e) {
        return Z.photo || /\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(e)
    }
    function r(t) {
        for (var i in t)
            e.isFunction(t[i]) && "on" !== i.substring(0, 2) && (t[i] = t[i].call(F));
        t.rel = t.rel || F.rel || "nofollow",
        t.href = e.trim(t.href || e(F).attr("href")),
        t.title = t.title || F.title
    }
    function l(t, i) {
        i && i.call(F),
        e.event.trigger(t)
    }
    function d() {
        var e, t, i, n = q + "Slideshow_", o = "click." + q;
        Z.slideshow && v[1] && (t = function() {
            L.text(Z.slideshowStop).unbind(o).bind(Q, function() {
                (j < v.length - 1 || Z.loop) && (e = setTimeout(B.next, Z.slideshowSpeed))
            }).bind(N, function() {
                clearTimeout(e)
            }).one(o + " " + $, i),
            u.removeClass(n + "off").addClass(n + "on"),
            e = setTimeout(B.next, Z.slideshowSpeed)
        }
        ,
        i = function() {
            clearTimeout(e),
            L.text(Z.slideshowStart).unbind([Q, N, $, o].join(" ")).one(o, t),
            u.removeClass(n + "on").addClass(n + "off")
        }
        ,
        Z.slideshowAuto ? t() : i())
    }
    function a(t) {
        if (!ee) {
            if (F = t,
            r(e.extend(Z, e.data(F, R))),
            v = e(F),
            j = 0,
            "nofollow" !== Z.rel && (v = e("." + te).filter(function() {
                var t = e.data(this, R).rel || this.rel;
                return t === Z.rel
            }),
            j = v.index(F),
            j === -1 && (v = v.add(F),
            j = v.length - 1)),
            !O) {
                if (O = A = !0,
                u.show(),
                Z.returnFocus)
                    try {
                        F.blur(),
                        e(F).one(J, function() {
                            try {
                                this.focus()
                            } catch (e) {}
                        })
                    } catch (e) {}
                c.css({
                    opacity: +Z.opacity,
                    cursor: Z.overlayClose ? "pointer" : "auto"
                }).show(),
                Z.w = h(Z.initialWidth, "x"),
                Z.h = h(Z.initialHeight, "y"),
                B.position(0),
                X && x.bind("resize." + Y + " scroll." + Y, function() {
                    c.css({
                        width: x.width(),
                        height: x.height(),
                        top: x.scrollTop(),
                        left: x.scrollLeft()
                    })
                }).trigger("resize." + Y),
                l(G, Z.onOpen),
                E.add(W).hide(),
                S.html(Z.close).show()
            }
            B.load(!0)
        }
    }
    var c, u, f, p, w, g, m, y, v, x, b, C, T, W, H, L, k, I, S, E, M, _, K, D, F, j, z, O, A, B, P = {
        transition: "elastic",
        speed: 300,
        width: 850,
        initialWidth: "600",
        innerWidth: !1,
        maxWidth: !1,
        height: 575,
        initialHeight: "450",
        innerHeight: !1,
        maxHeight: !1,
        scalePhotos: !0,
        scrolling: !0,
        inline: !1,
        html: !1,
        iframe: !1,
        fastIframe: !0,
        photo: !1,
        href: !1,
        title: !1,
        rel: !1,
        opacity: .9,
        preloading: !0,
        current: "image {current} of {total}",
        previous: "previous",
        next: "next",
        close: "close",
        open: !1,
        returnFocus: !0,
        loop: !0,
        slideshow: !1,
        slideshowAuto: !0,
        slideshowSpeed: 2500,
        slideshowStart: "start slideshow",
        slideshowStop: "stop slideshow",
        onOpen: !1,
        onLoad: !1,
        onComplete: !1,
        onCleanup: !1,
        onClosed: !1,
        overlayClose: !0,
        escKey: !0,
        arrowKey: !0
    }, R = "colorbox", q = "cbox", G = q + "_open", N = q + "_load", Q = q + "_complete", $ = q + "_cleanup", J = q + "_closed", U = q + "_purge", V = e.browser.msie && !e.support.opacity, X = V && e.browser.version < 7, Y = q + "_IE6", Z = {}, ee = !1, te = q + "Element";
    B = e.fn[R] = e[R] = function(t, i) {
        var n, o = this;
        return !o[0] && o.selector ? o : (t = t || {},
        i && (t.onComplete = i),
        o[0] && void 0 !== o.selector || (o = e("<a/>"),
        t.open = !0),
        o.each(function() {
            e.data(this, R, e.extend({}, e.data(this, R) || P, t)),
            e(this).addClass(te)
        }),
        n = t.open,
        e.isFunction(n) && (n = n.call(o)),
        n && a(o[0]),
        o)
    }
    ,
    B.init = function() {
        x = e(i),
        u = n().attr({
            id: R,
            class: V ? q + (X ? "IE6" : "IE") : ""
        }),
        c = n("Overlay", X ? "position:absolute" : "").hide(),
        f = n("Wrapper"),
        p = n("Content").append(b = n("LoadedContent", "width:0; height:0; overflow:hidden"), T = n("LoadingOverlay").add(n("LoadingGraphic")), W = n("Title"), H = n("Current"), k = n("Next"), I = n("Previous"), L = n("Slideshow").bind(G, d), S = o("Close")),
        f.append(n().append(n("TopLeft"), w = n("TopCenter"), n("TopRight")), n(!1, "clear:left").append(g = n("MiddleLeft"), p, m = n("MiddleRight")), n(!1, "clear:left").append(n("BottomLeft"), y = n("BottomCenter"), n("BottomRight"))).children().children().css({
            float: "left"
        }),
        C = n(!1, "position:absolute; width:9999px; visibility:hidden; display:none"),
        e("body").prepend(c, u.append(f, C)),
        p.children().hover(function() {
            e(this).addClass("hover")
        }, function() {
            e(this).removeClass("hover")
        }).addClass("hover"),
        M = w.height() + y.height() + p.outerHeight(!0) - p.height(),
        _ = g.width() + m.width() + p.outerWidth(!0) - p.width(),
        K = b.outerHeight(!0),
        D = b.outerWidth(!0),
        u.css({
            "padding-bottom": M,
            "padding-right": _
        }).hide(),
        k.click(function() {
            B.next()
        }),
        I.click(function() {
            B.prev()
        }),
        S.click(function() {
            B.close()
        }),
        E = k.add(I).add(H).add(L),
        p.children().removeClass("hover"),
        e("." + te).live("click", function(e) {
            0 !== e.button && "undefined" != typeof e.button || e.ctrlKey || e.shiftKey || e.altKey || (e.preventDefault(),
            a(this))
        }),
        c.click(function() {
            Z.overlayClose && B.close()
        }),
        e(t).bind("keydown." + q, function(e) {
            var t = e.keyCode;
            O && Z.escKey && 27 === t && (e.preventDefault(),
            B.close()),
            O && Z.arrowKey && v[1] && (37 === t ? (e.preventDefault(),
            I.click()) : 39 === t && (e.preventDefault(),
            k.click()))
        })
    }
    ,
    B.remove = function() {
        u.add(c).remove(),
        e("." + te).die("click").removeData(R).removeClass(te)
    }
    ,
    B.position = function(e, i) {
        function n(e) {
            w[0].style.width = y[0].style.width = p[0].style.width = e.style.width,
            T[0].style.height = T[1].style.height = p[0].style.height = g[0].style.height = m[0].style.height = e.style.height
        }
        var o, h = Math.max(t.documentElement.clientHeight - Z.h - K - M, 0) / 2 + x.scrollTop(), s = Math.max(x.width() - Z.w - D - _, 0) / 2 + x.scrollLeft();
        o = u.width() === Z.w + D && u.height() === Z.h + K ? 0 : e,
        f[0].style.width = f[0].style.height = "9999px",
        u.dequeue().animate({
            width: Z.w + D,
            height: Z.h + K,
            top: h,
            left: s
        }, {
            duration: o,
            complete: function() {
                n(this),
                A = !1,
                f[0].style.width = Z.w + D + _ + "px",
                f[0].style.height = Z.h + K + M + "px",
                i && i()
            },
            step: function() {
                n(this)
            }
        })
    }
    ,
    B.resize = function(e) {
        if (O) {
            if (e = e || {},
            e.width && (Z.w = h(e.width, "x") - D - _),
            e.innerWidth && (Z.w = h(e.innerWidth, "x")),
            b.css({
                width: Z.w
            }),
            e.height && (Z.h = h(e.height, "y") - K - M),
            e.innerHeight && (Z.h = h(e.innerHeight, "y")),
            !e.innerHeight && !e.height) {
                var t = b.wrapInner("<div style='overflow:auto'></div>").children();
                Z.h = t.height(),
                t.replaceWith(t.children())
            }
            b.css({
                height: Z.h
            }),
            B.position("none" === Z.transition ? 0 : Z.speed)
        }
    }
    ,
    B.prep = function(t) {
        function i() {
            return Z.w = Z.w || b.width(),
            Z.w = Z.mw && Z.mw < Z.w ? Z.mw : Z.w,
            Z.w
        }
        function o() {
            return Z.h = Z.h || b.height(),
            Z.h = Z.mh && Z.mh < Z.h ? Z.mh : Z.h,
            Z.h
        }
        function h(t) {
            B.position(t, function() {
                var t, i, n, o, h, d, a = v.length;
                O && (d = function() {
                    T.hide(),
                    l(Q, Z.onComplete)
                }
                ,
                V && z && b.fadeIn(100),
                W.html(Z.title).add(b).show(),
                a > 1 ? ("string" == typeof Z.current && H.html(Z.current.replace(/\{current\}/, j + 1).replace(/\{total\}/, a)).show(),
                k[Z.loop || j < a - 1 ? "show" : "hide"]().html(Z.next),
                I[Z.loop || j ? "show" : "hide"]().html(Z.previous),
                t = j ? v[j - 1] : v[a - 1],
                n = j < a - 1 ? v[j + 1] : v[0],
                Z.slideshow && L.show(),
                Z.preloading && (o = e.data(n, R).href || n.href,
                i = e.data(t, R).href || t.href,
                o = e.isFunction(o) ? o.call(n) : o,
                i = e.isFunction(i) ? i.call(t) : i,
                s(o) && (e("<img/>")[0].src = o),
                s(i) && (e("<img/>")[0].src = i))) : E.hide(),
                Z.iframe ? (h = e("<iframe/>").addClass(q + "Iframe")[0],
                Z.fastIframe ? d() : e(h).load(d),
                h.name = q + +new Date,
                h.src = Z.href,
                Z.scrolling || (h.scrolling = "no"),
                V && (h.frameborder = 0,
                h.allowTransparency = "true"),
                e(h).appendTo(b).one(U, function() {
                    h.src = "//about:blank"
                })) : d(),
                "fade" === Z.transition ? u.fadeTo(r, 1, function() {
                    u[0].style.filter = ""
                }) : u[0].style.filter = "",
                x.bind("resize." + q, function() {
                    B.position(0)
                }))
            })
        }
        if (O) {
            var r = "none" === Z.transition ? 0 : Z.speed;
            x.unbind("resize." + q),
            b.remove(),
            b = n("LoadedContent").html(t),
            b.hide().appendTo(C.show()).css({
                width: i(),
                overflow: Z.scrolling ? "auto" : "hidden"
            }).css({
                height: o()
            }).prependTo(p),
            C.hide(),
            e(z).css({
                float: "none"
            }),
            X && e("select").not(u.find("select")).filter(function() {
                return "hidden" !== this.style.visibility
            }).css({
                visibility: "hidden"
            }).one($, function() {
                this.style.visibility = "inherit"
            }),
            "fade" === Z.transition ? u.fadeTo(r, 0, function() {
                h(0)
            }) : h(r)
        }
    }
    ,
    B.load = function(t) {
        var i, o, d = B.prep;
        A = !0,
        z = !1,
        F = v[j],
        t || r(e.extend(Z, e.data(F, R))),
        l(U),
        l(N, Z.onLoad),
        Z.h = Z.height ? h(Z.height, "y") - K - M : Z.innerHeight && h(Z.innerHeight, "y"),
        Z.w = Z.width ? h(Z.width, "x") - D - _ : Z.innerWidth && h(Z.innerWidth, "x"),
        Z.mw = Z.w,
        Z.mh = Z.h,
        Z.maxWidth && (Z.mw = h(Z.maxWidth, "x") - D - _,
        Z.mw = Z.w && Z.w < Z.mw ? Z.w : Z.mw),
        Z.maxHeight && (Z.mh = h(Z.maxHeight, "y") - K - M,
        Z.mh = Z.h && Z.h < Z.mh ? Z.h : Z.mh),
        i = Z.href,
        T.show(),
        Z.inline ? (n().hide().insertBefore(e(i)[0]).one(U, function() {
            e(this).replaceWith(b.children())
        }),
        d(e(i))) : Z.iframe ? d(" ") : Z.html ? d(Z.html) : s(i) ? (e(z = new Image).addClass(q + "Photo").error(function() {
            Z.title = !1,
            d(n("Error").text("This image could not be loaded"))
        }).load(function() {
            var e;
            z.onload = null,
            Z.scalePhotos && (o = function() {
                z.height -= z.height * e,
                z.width -= z.width * e
            }
            ,
            Z.mw && z.width > Z.mw && (e = (z.width - Z.mw) / z.width,
            o()),
            Z.mh && z.height > Z.mh && (e = (z.height - Z.mh) / z.height,
            o())),
            Z.h && (z.style.marginTop = Math.max(Z.h - z.height, 0) / 2 + "px"),
            v[1] && (j < v.length - 1 || Z.loop) && (z.style.cursor = "pointer",
            z.onclick = function() {
                B.next()
            }
            ),
            V && (z.style.msInterpolationMode = "bicubic"),
            setTimeout(function() {
                d(z)
            }, 1)
        }),
        setTimeout(function() {
            z.src = i
        }, 1)) : i && C.load(i, function(t, i, o) {
            d("error" === i ? n("Error").text("Request unsuccessful: " + o.statusText) : e(this).contents())
        })
    }
    ,
    B.next = function() {
        !A && v[1] && (j < v.length - 1 || Z.loop) && (j = j < v.length - 1 ? j + 1 : 0,
        B.load())
    }
    ,
    B.prev = function() {
        !A && v[1] && (j || Z.loop) && (j = j ? j - 1 : v.length - 1,
        B.load())
    }
    ,
    B.close = function() {
        O && !ee && (ee = !0,
        O = !1,
        l($, Z.onCleanup),
        x.unbind("." + q + " ." + Y),
        c.fadeTo(200, 0),
        u.stop().fadeTo(300, 0, function() {
            u.add(c).css({
                opacity: 1,
                cursor: "auto"
            }).hide(),
            l(U),
            b.remove(),
            setTimeout(function() {
                ee = !1,
                l(J, Z.onClosed)
            }, 1)
        }))
    }
    ,
    B.element = function() {
        return e(F)
    }
    ,
    B.toggleLoadingOverlay = function() {
        T.toggle(),
        T.is(":hidden") ? e("#ariaStatusMsg").html(ACC.accessibilityStoresLoaded) : e("#ariaStatusMsg").html(ACC.accessibilityLoading)
    }
    ,
    B.settings = P,
    e(B.init)
}(jQuery, document, this);
